

\section{$\omega$-Hausdorff rank}

\begin{definitions}
  $\qqo = \setcomp{M : \exists n \in \NN . M \subseteq \ZZ \cdot n}$.

  We define $\hrank{M} = \alpha$ iff $M \in \qqo^{= \alpha}$.

  $\mathcal{B}_{\alpha} := \bounded{\qqo^{< \alpha}}$ is the class
  of linear orders of rank $< \alpha$ on bounded intervals.
\end{definitions}


\begin{definition}
  Let $M \in \mathcal{B}_{\alpha}$. We define the $\alpha$-shape
  of $M$ to be the $I \in \setcomp{1, \omega, \omega^R, \ZZ}$ 
  for which the previous lemma holds.

  We define $\mathcal{S}^{s}_{\alpha}$ to be the class of linear orders
  whose $\alpha$-shape is $s$, for $s \in \setcomp{1, \omega, \omega^R, \ZZ}$.
\end{definition}

\begin{lemma}
  Let $\alpha > 0$ be an ordinal.

  Let $M$ be a countable linear order.

  Then $\hrank{M} \le \alpha$ iff $M$ is a finite sum of $\mathcal{B}_{\alpha}$-subintervals.
\end{lemma}

\begin{proof}
  From the previous lemma, it is clear that if $M$ is a finite sum of $\mathcal{B}_{\alpha}$-subintervals,
  then $\hrank{M} \le \alpha$, since the rank bound is preserved under finite sums.

  Conversely, suppose $\hrank{M} \le \alpha$.

  \emph{If} $M = \sum_{i \in \ZZ} M_i$ for some $M_i$ of Hausdorff rank $< \alpha$,
  take $x, y \in M$. Then let $x \in M_{i_1}$ and $y \in M_{i_2}$.

  Then $[x, y] \subseteq \sum_{i \in [i_1, i_2]} M_i$. But the last sum is of rank $< \alpha$
  and thus $[x, y]$ is of rank $< \alpha$. That is, $M \in \mathcal{B}_{\alpha}$.

  So we have proven that each interval which is a $\ZZ$-sum of linear orders of
  $\omega$-rank $< \alpha$ is in $\mathcal{B}_{\alpha}$.

  But generally, $M$ is a finite sum of such $\ZZ$-sums, so it is a finite sums
  of $\mathcal{B}_{\alpha}$-subintervals.
\end{proof}

\begin{lemma}
  Let $\alpha \ge \omega$ be a limit ordinal.

  Let $M = \sum_{i \in I} M_i$ where $I \in \qqo$ and $\hrank{M_i} < \alpha$
  for all $i \in I$.

  Then,
  $$\hrank{M} = \alpha \iff \sup_{i \in I} \parens{\hrank{M_i}+1} = \alpha$$
\end{lemma}

\begin{proof}
  Clearly $\hrank{M} \le \alpha$.
  
  If $\sup_{i \in I}{\hrank{M_i}} = \alpha$,
  since $\hrank{M} \ge \hrank{M_i}$ for all $i \in I$,
  we get $\hrank{M} \ge \alpha$.

  If $\sup_{i \in I}{\hrank{M_i}} = \beta < \alpha$,
  then $\hrank{M} \le \beta + 1 < \alpha$, since 
  $\alpha$ is a limit ordinal.
\end{proof}

\begin{definition}
  Let $\alpha \ge \omega$ be a limit ordinal.

  Let $M$ be a linear order.

  We say that $M$ has \emph{$\alpha$-shape} $I$ if:

  \begin{itemize}
    \item $I = 1$ and $\hrank{M} < \alpha$, or
    \item $I \in \setcomp{\omega, \omega^R, \ZZ}$ and $\hrank{M} = \alpha$ and
      there exists a decomposition $M = \sum_{i \in I} M_i$ where
      $\hrank{M_i} < \alpha$ for all $i \in I$.
  \end{itemize}
\end{definition}


\begin{lemma}[Characterization of $\mathcal{B}_{\alpha}$]
  Let $\alpha \ge \omega$ be a limit ordinal.

  Let $M \in \mathcal{B}_{\alpha}$.
  
  Then $M$ \emph{has a unique} $\alpha$-shape in $\setcomp{1, \omega, \omega^R, \ZZ}$.
\end{lemma}

\begin{proof}
  $\implies$: Let $M \in \mathcal{B}_{\alpha}$. By the lemma,
  there exists a decomposition $M = \sum_{i \in I} M_i$ where
  $I \subseteq \ZZ$ and $\hrank{M_i} < \alpha$ for all $i \in I$.

  If $I$ is finite, then $M$ is the $1$-sum of $\sum_{i \in I} M_i$,
  and thus it has rank $< \alpha$, so we are done.

  The existence is clear, but I am having trouble writing
  it formally. The idea is to just sum up $M_i$ in one/both directions,
  as long as it does not increase the rank.

  TBC.


\end{proof}