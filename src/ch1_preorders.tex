\section{Preorders}

We begin by studying the properties of preorders.
Basically, we define a \emph{property} as a class which is
close under isomorphism. We then define
the sum operation on preorders. This will be used
to create new properties from old ones.

% Definition of a preorder
\begin{definitions} [Preorder]
  A \emph{(labeled) preorder} is a a set $M$
  together with a binary relation $\le$ on $M$ such that
  $\le$ is reflexive and transitive,
  possibly endowed with monadic predicates (labels)
  over some first-order monadic signature.
\end{definitions}

% Definition of a property
\begin{definition}[Property of preorders]
  A \emph{property} $\pp$ of preorders is a class of preorders which
  is closed under isomorphism.
\end{definition}

% Definition of a monotone property
\begin{definition}
  A property $\pp$ of preorders is \emph{monotone} if for every preorder $M$,
  $M \in \pp$ implies that every suborder of $M$ is in $\pp$.
\end{definition}

% Definitions of special preorders.
\begin{definition}
  Let $M$ be a preorder.

  Then $M^\ast$ is the dual/reverse preorder of $M$.
\end{definition}

\begin{definition}[Sum of preorders]
  Let $I$ be a preorder, and let $\set{M_i}_{i \in I}$ be a family of preorders over
  a disjoint signature (i.e., for every $i \in I$, $I$ and $M_i$ have disjoint sets of labels).

  The sum $M = \sum_{i \in I} M_i$ is defined as follows:

  The domain is $M = \biguplus_{i \in I} M_i$ (a disjoint union).

  Let $\le_i$ be the preorder on $M_i$.

  Let $x \in M_i$ and $y \in M_j$.

  Then we define $x \le y$ iff either
  $i = j$ and $x \le_i y$ or $i < j$.

  The labels are inherited from either $I$ or the $M_i$'s.

  If $I = 2$, we define $M_1 + M_2 := \sum_{i \in 2} M_i$.
\end{definition}

\begin{lemma}
  Let $I$ be a preorder, and let $\set{M_i}_{i \in I}$ be a family of preorders,
  over a disjoint signature.

  Then $M = \sum_{i \in I} M_i$ is a preorder.
\end{lemma}

\begin{proof}
  Reflexivity is clear.

  For transitivity, suppose $x \le y$ and $y \le z$.

  Suppose $x \in M_i$, $y \in M_j$, $z \in M_k$.

  Then $i \le j$ and $j \le k$, so $i \le k$.
  If $i = k$, then necessarily $i = j = k$, and so $x \le_i y$ and $y \le_i z$,
  so $x \le_i z$, so $x \le z$, as required.

  Otherwise, $i < k$, and thus $x \le z$, as required.
\end{proof}

% Definition of sum of two properties
\begin{definition}
  Let $\pp_1$ and $\pp_2$ be properties of preorders.

  Then we define
  \[
    \pp_1 + \pp_2 := \set{M_1 + M_2 : M_1 \in \pp_1 \wedge M_2 \in \pp_2}
  \]

  The labels are inherited from either $\pp_1$ or $\pp_2$.
\end{definition}

% Definition of an additive property
\begin{definition}
  A property $\pp$ of preorders is an \emph{additive property} if for every preorders $M_1$ and $M_2$,
  $M_1 + M_2 \in \pp$ iff $M_1, M_2 \in \pp$.
\end{definition}

\begin{definition}[Kleene plus]
  Let $\pp$ be a property of preorders.

  We define its Kleene plus as the smallest property of preorders $\pp^+$ which contains $\pp$ and is closed under
  finite sums.

  That is, $1^+ = \set{1, 2, \ldots}$, and $\pp^+ = \sum_{1^+}{\pp}$.
\end{definition}


\begin{definition}[Sum of a property over a preorder]
  Let $I$ be a preorder.

  Let $\qq$ be a property of preorders.

  Then we define
  \[
    \sum_{I}{\qq} := \set{\sum_{i \in I}{M_i} : \forall i \in I. M_i \in \qq}
  \]
\end{definition}


\begin{definition}[Sum of a family of properties over a preorder]
  Let $I$ be a preorder.

  Let $\set{\qq_i}_{i \in I}$ be a family of properties of preorders
  over a disjoint signature.

  Then we define
  \[
    \sum_{i \in I}{\qq_i} := \set{\sum_{i \in I}{M_i} : \forall i \in I. M_i \in \qq_i}
  \]

  The labels are inherited from either $I$ or the $\qq_i$'s.
\end{definition}

\begin{note}
  By the previous two definitions, if $I$ has no labels,
  \[
    \sum_{I}{\qq} = \sum_{i \in I}{\qq}
  \]
\end{note}

\begin{definition}[Sum of a property over a property]
  Let $\pp$ be a property of preorders.

  Let $\qq$ be a property of preorders over a disjoint signature.

  Then we define,
  \[
    \sum_{\pp}{\qq} := \set{\sum_{I}{\qq} : I \in \pp}
  \]
\end{definition}
