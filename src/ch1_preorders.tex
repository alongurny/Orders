\section{Preorders}
We begin by studying the classes of preorders. Basically, we define a \emph{class} as a class which is close under
isomorphism. We then define the sum operation on preorders. This will be used to create new classes from old ones.

% Definition of a preorder
\begin{definitions} [Preorder]
  A \emph{(labeled) preorder} is a a set $M$
  together with a binary relation $\le$ on $M$ such that
  $\le$ is reflexive and transitive,
  possibly endowed with monadic predicates (labels)
  over some first-order monadic signature.
\end{definitions}

% Definition of a class
\begin{definition}[class of preorders]
  A \emph{class} $\pp$ of preorders is a collection of preorders,
  all defined over one signature,
  which is closed under isomorphism.
\end{definition}

% Definition of a monotone class
\begin{definition}
  a class $\pp$ of preorders is \emph{monotone} if for every preorder $M$,
  $M \in \pp$ implies that every suborder of $M$ is in $\pp$.
\end{definition}

% Definitions of special preorders.
\begin{definition}
  Let $M$ be a preorder.

  Then $M^\ast$ is the dual/reverse preorder of $M$.
\end{definition}

\begin{definition}[Sum of preorders]
  Let $I$ be a preorder.

  Let $\set{M_i}_{i \in I}$ be a family of preorders
  over some signature.

  The sum $M = \sum_{i \in I} M_i$ is defined as follows:

  The domain is $M = \biguplus_{i \in I} M_i$ (a disjoint union).

  Let $\le_i$ be the preorder on $M_i$.

  Let $x \in M_i$ and $y \in M_j$.

  Then we define $x \le y$ iff either
  $i = j$ and $x \le_i y$ or $i < j$.

  The labels are inherited from the $M_i$'s.

  If $I = 2$, we define $M_0 + M_1 := \sum_{i \in 2} M_i$.
\end{definition}

\begin{lemma}
  Let $I$ be a preorder.
  
  Let $\set{M_i}_{i \in I}$ be a family of preorders
  over some signature.

  Then $M = \sum_{i \in I} M_i$ is a preorder.
\end{lemma}

\begin{proof}
  Reflexivity is clear.

  For transitivity, suppose $x \le y$ and $y \le z$.

  Suppose $x \in M_i$, $y \in M_j$, $z \in M_k$.

  Then $i \le j$ and $j \le k$, so $i \le k$.
  If $i = k$, then necessarily $i = j = k$, and so $x \le_i y$ and $y \le_i z$,
  so $x \le_i z$, so $x \le z$, as required.

  Otherwise, $i < k$, and thus $x \le z$, as required.
\end{proof}

% Definition of sum of two classes
\begin{definition}
  Let $\pp_1$ and $\pp_2$ be classes of preorders over some signature.

  Then we define
  \[
    \pp_1 + \pp_2 := \set{M_1 + M_2 : M_1 \in \pp_1 \wedge M_2 \in \pp_2}
  \]

  The labels are inherited from either $\pp_1$ or $\pp_2$.
\end{definition}

% Definition of an additive class
\begin{definition}
  Let $\pp$ be a class of preorders.

  $\pp$ is called an \emph{additive class} if for every preorders $M_1$ and $M_2$,
  $M_1 + M_2 \in \pp$ iff $M_1, M_2 \in \pp$.
\end{definition}

\begin{definition}[Kleene plus]
  Let $\pp$ be a class of preorders.

  We define its Kleene plus as the smallest class of preorders $\pp^+$ which contains $\pp$ and is closed under
  finite sums.

  That is, $1^+ = \set{1, 2, \ldots}$, and $\pp^+ = \sum_{1^+}{\pp}$.
\end{definition}

\begin{definition}[Sum of a family of classes over a preorder]
  Let $I$ be a preorder.

  Let $\set{\qq_i}_{i \in I}$ be a family of classes of preorders
  over some signature.

  Then we define
  \[
    \sum_{i \in I}{\qq_i} := \set{\sum_{i \in I}{M_i} : \forall i \in I. M_i \in \qq_i}
  \]

  The labels are inherited from $\qq_i$'s.
\end{definition}

\begin{definition}[Sum of a class over a preorder]
  Let $\qq$ be a class of preorders.

  Let $I$ be a preorder.

  Then we define
  \[
    \sum_{I}{\qq} := \set{\sum_{i \in I}{M_i} : \forall i \in I. M_i \in \qq}
  \]
\end{definition}

\begin{note}
  Let $\qq$ be a class of preorders.

  Let $I$ be a preorder.

  By the previous two definitions,
  \[
    \sum_{I}{\qq} = \sum_{i \in I}{\qq}
  \]
\end{note}

\begin{definition}[Sum of a class over a class]
  Let $\pp$ be a class of preorders.

  Let $\qq$ be a class of preorders.

  Then we define,
  \[
    \sum_{\pp}{\qq} := \set{\sum_{I}{\qq} : I \in \pp}
  \]
\end{definition}

\begin{lemma}[Associativity of sum]
  Let $I$ be a preorder.

  Let $\set{J_i}_{i \in I}$ be a family of mutually disjoint preorders
  over some signature.

  Let $\set{K_j}_{j \in \biguplus_i J_i}$ be a family of preorders
  over some signature.

  Then,
  \[
    \sum_{i \in I}{\sum_{j \in J_i}{K_j}} \cong \sum_{j \in \sum_{i \in I}{J_i}}{K_j}
  \]
\end{lemma}

\begin{proof}
  This follows from the definition of the sum operation.
\end{proof}

\begin{corollary}[Associativity of sum for classes]
  Let $\pp_1$, $\pp_2$ and $\pp_3$ be classes.

  Then $\sum_{\pp_1}{\sum_{\pp_2}{\pp_3}} = \sum_{\sum_{\pp_1}{\pp_2}}{\pp_3}$.
\end{corollary}

\begin{lemma}[Sum and union commute]
  Let $\ppp$ be a family of classes.

  Let $\qq$ be a class.

  Then $\sum_{\bigcup \ppp}{\qq} = \bigcup_{\pp \in \ppp}{\sum_{\pp}{\qq}}$.
\end{lemma}

\begin{proof}
  This is obvious from the definition of the sum operation.
\end{proof}