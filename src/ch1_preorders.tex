\section{Preorders}

We begin by studying the properties of preorders.
Basically, we define a \emph{property} as a class which is
close under isomorphism. We then define
the sum operation on preorders. This will be used
to create new properties from old ones.

% Definition of a (labeled) preorder
\begin{definitions}[(Labeled) preorder]
  A \emph{preorder} is a a set $M$
  together with a binary relation $\le$ on $M$ such that
  $\le$ is reflexive and transitive.

  A \emph{labeled preorder} is a preorder $M$ together with a labeling function
  $\gamma : M \to C$, where $C$ is a set of labels (colors).
\end{definitions}

% Definition of a property
\begin{definition}[Property of preorders]
  A \emph{property} $\pp$ of preorders is a class of \emph{labeled} preorders which
  is closed under isomorphism.
\end{definition}

% Definition of a monotone property
\begin{definition}
  A property $\pp$ of preorders is \emph{monotone} if for every preorder $M$,
  $M \in \pp$ implies that every suborder of $M$ is in $\pp$.
\end{definition}

% Definitions of special preorders.
\begin{definition}
  Let $M$ be a (labeled) preorder.

  Then $M^\ast$ is the dual/reverse (labeled) preorder of $M$.
\end{definition}

\begin{definition}[Sum of preorders]
  Let $I$ be a preorder, and let $\set{M_i}_{i \in I}$ be a family of labeled preorders.

  The sum $M = \sum_{i \in I} M_i$ is defined as follows:

  The domain is $M = \biguplus_{i \in I} M_i$ (a disjoint union).

  Let $\le_i$ be the preorder on $M_i$.

  Let $x \in M_i$ and $y \in M_j$.

  Then we define $x \le y$ iff either 
  $i = j$ and $x \le_i y$ or $i < j$.

  The labels are defined naturally.

  If $I = 2$, we define $M_1 + M_2 := \sum_{i \in 2} M_i$.
\end{definition}

\begin{lemma}
  Let $I$ be a preorder, and let $\set{M_i}_{i \in I}$ be a family of preorders.

  Then $M = \sum_{i \in I} M_i$ is a preorder.
\end{lemma}

\begin{proof}
  Reflexivity is clear.

  For transitivity, suppose $x \le y$ and $y \le z$.

  Suppose $x \in M_i$, $y \in M_j$, $z \in M_k$.

  Then $i \le j$ and $j \le k$, so $i \le k$.
  If $i = k$, then necessarily $i = j = k$, and so $x \le_i y$ and $y \le_i z$,
  so $x \le_i z$, so $x \le z$, as required.

  Otherwise, $i < k$, and thus $x \le z$, as required.
\end{proof}

% Definition of sum of two properties
\begin{definition}
  Let $\pp_1$ and $\pp_2$ be properties of preorders.

  Then we define
  \[
    \pp_1 + \pp_2 := \set{M_1 + M_2 : M_1 \in \pp_1 \wedge M_2 \in \pp_2}
  \]
\end{definition}

% Definition of an additive property
\begin{definition}
  A property $\pp$ of preorders is an \emph{additive property} if for every preorders $M_1$ and $M_2$,
  $M_1 + M_2 \in \pp$ iff $M_1, M_2 \in \pp$.
\end{definition}

\begin{definition}[Kleene plus]
  Let $\pp$ be a property of preorders.

  We define its Kleene plus as the smallest property of preorders $\pp^+$ which contains $\pp$ and is closed under
  finite sums.

  That is, $1^+ = \set{1, 2, \ldots}$, and $\pp^+ = \sum_{1^+}{\pp}$.
\end{definition}


\begin{definition}[Sum of a property over a preorder]
  Let $I$ be a preorder.

  Let $\qq$ be a property of preorders.

  Then we define
  \[
    \sum_{I}{\qq} := \set{\sum_{i \in I}{M_i} : \forall i \in I. M_i \in \qq}
  \]
\end{definition}


\begin{definition}[Sum of a family of properties over a preorder]
  Let $I$ be a preorder.

  Let $\set{\qq_i}_{i \in I}$ be a family of properties of preorders.

  Then we define
  \[
    \sum_{i \in I}{\qq_i} := \set{\sum_{i \in I}{M_i} : \forall i \in I. M_i \in \qq_i}
  \]
\end{definition}

\begin{note}
  By the previous two definitions,
  \[
    \sum_{I}{\qq} = \sum_{i \in I}{\qq}
  \]
\end{note}

\begin{definition}[Sum of properties over a labeled preorder]
  Let $I$ be a labeled preorder, with a labeling function $\gamma : I \to \vec{C}$,
  where $\vec{C}$ is a set of colors.

  Let $\vec{\qq} = \set{\qq_c}_{c \in \vec{C}}$ be a family of properties of preorders,
  indexed by the colors.

  Then we define
  \[
    \sumv{I}{\vec{C}}{\vec{\qq}} := \set{\sum_{i \in I}{M_i} : \forall i \in I. M_i \in \qq_{\gamma(i)}}
  \]
\end{definition}

\begin{notes}
  \begin{enumerate}
    \item We can see a sum over an unlabeled preorder $I$ as a sum over a labeled preorder
          with a constant labeling function $\gamma : I \to \set{1}$.
    \item We can see $P_1 + P_2$ as a sum over $I = \set{1, 2}$, colored
          with $\gamma(i) = i$.
  \end{enumerate}
\end{notes}

\begin{definition}[Sum of a property over a property]
  Let $\pp$ be a property of unlabeled preorders.

  Let $\qq$ be a property of preorders.

  Then we define,
  \[
    \sum_{\pp}{\qq} := \set{\sum_{I}{\qq} : I \in \pp}
  \]
\end{definition}

\begin{definition}[Sum of a property over a labeled property]
  Let $\pp$ be a property of labeled preorders, over a set of colors $\vec{C}$.

  Let $\vec{\qq} = \set{\qq_c}_{c \in \vec{C}}$ be a family of properties of preorders,

  Then we define,
  \[
    \sumv{\pp}{\vec{C}}{\vec{\qq}} := \set{\sumv{I}{\vec{C}}{\vec{M}} : I \in \pp}
  \]
\end{definition}