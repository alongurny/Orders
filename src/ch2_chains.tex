\section{Linear Orders}

Linear orders are a central object of study in order theory, providing a natural setting for the analysis of sequences, intervals, and order types. In this chapter, we build upon the foundation of preorders to introduce linear orders, explore their properties, and develop tools for analyzing their structure. The concepts introduced here will be essential for understanding ranks, types, and decidability in later chapters.

% Definition of a linear order
\begin{definitions}[Linear order]
  A \emph{linear order} a preorder which is symmetric and total.
\end{definitions}

% Discussion
Properties of linear orders, like those of preorders, allow us to classify and study these structures in a general and
abstract way. The following definition formalizes this idea.

% Definition of a property
\begin{definition}[Property of linear orders]
  A \emph{property} $\pp$ of linear orders is a class of linear orders which
  is closed under isomorphism.
\end{definition}

% Discussion
Intervals and subintervals are fundamental in the study of linear orders, as they allow us to focus on local structure and
analyze how properties behave under restriction. The next definition introduces the various types of subintervals.

% Definition of an interval, subintervals and bounded subintervals
\begin{definition}[Subintervals]
  Let $M$ be a linear order,
  and let $x, y \in M$, such that $x \le y$.

  Then we define the \emph{bounded subintervals} $[x, y]$,
  $(x, y]$, $[x, y)$ and $(x, y)$ as usual.

          We also define the \emph{semi-bounded subintervals} $(-\infty, x]$,
  $[x, \infty)$, $(-\infty, x)$ and $(x, \infty)$ as usual.

  We also define \emph{the unbounded subinterval} $(-\infty, \infty)$ as the whole linear order $M$,
  as usual.

  A \emph{subinterval} is either
  a bounded subinterval, a semi-bounded subinterval or the unbounded subinterval.

  If $x > y$ then we define the intervals as follows:
  \begin{align*}
    [x, y] & := [y, x] \\
    (x, y] & := (y, x] \\
    [x, y) & := [y, x) \\
    (x, y) & := (y, x)
  \end{align*}

\end{definition}

% Discussion
Cofinality concepts help us understand the 'ends' of a linear order and play a crucial role in the classification of infinite
orders. The following definitions introduce left, right, and bi-directional cofinality.

% Definition of left/right/bi-directionally cofinal
\begin{definition}
  Let $M$ be a linear order.

  A set $A \subseteq M$ is \emph{left cofinal} in $M$ if for every $x \in M$,
  there exists $y \in A$ such that $y < x$.

  A set $A \subseteq M$ is \emph{right cofinal} in $M$ if for every $x \in M$,
  there exists $y \in A$ such that $x < y$.

  A set $A \subseteq M$ is \emph{bi-directionally cofinal} in $M$ if it is both left and right cofinal.
\end{definition}

% Discussion
The next lemma shows that additive properties are preserved when passing to intervals, which is a key feature for many
structural results about linear orders.
\begin{lemma}\label{additive-interval}
  Let $\pp$ be an additive property of linear orders.

  Let $M \in \pp$ be a linear order.

  Let $x, y \in M$ be any two points in a linear order $M$.

  Then, $[x, y] \in \pp$.
\end{lemma}

\begin{proof}
  WLOG, suppose $x \le y$.

  Note that,
  \[
    M = (-\infty, \infty) = (-\infty, x) + [x, y] + (y, \infty)
  \]

  when $(-\infty, x)$ and/or $(y, \infty)$ may be empty.

  Since $\pp$ is an additive property, we conclude that $[x, y] \in \pp$.
\end{proof}

% Discussion
The following corollary demonstrates that any nontrivial additive property must contain the singleton order, highlighting the
minimal elements in such classes.

\begin{corollary}\label{additive-1}
  Let $\pp$ be a nontrivial additive property of linear orders.

  Then $1 \in \pp$.
\end{corollary}

\begin{proof}
  Let $M \in \pp$ be any linear order and let
  $x \in M$ be any point in $M$.

  Apply~\cref{additive-interval} to the linear order $M$,
  and the points $x$ and $x$, to conclude that
  $[x, x] \equiv 1 \in \pp$.
\end{proof}

\begin{note}
  Note that~\cref{additive-1} is false if we do not restrict ourselves to linear orders.

  For example, $\ps{1 \uplus 1}^+$ is a property of preorders
  which is additive, but does not contain $1$.
\end{note}

% Discussion
The note below clarifies the limitations of the previous result, emphasizing the importance of the linearity assumption.

\begin{corollary}\label{additive-endpoints}
  Let $\pp$ be an additive property of linear orders.

  Let $M$ be a linear order.

  Let $x, y \in M$ be any two points in a linear order $M$.
  Then the following are equivalent:

  \begin{enumerate}
    \item $(x, y) \in \pp$
    \item $(x, y] \in \pp$
    \item $[x, y) \in \pp$
    \item $[x, y] \in \pp$
  \end{enumerate}
\end{corollary}

\begin{proof}
  This is just applying the definition of an additive property
  to the orders $[x, y]$ and $1$.
\end{proof}

\begin{corollary}\label{additive-transitivity}
  Let $\pp$ be an additive property of linear orders.

  Let $M$ be a linear order.

  Let $x, y, z \in M$ be any three points in a linear order $M$,
  such that $[x, y] \in \pp$ and $[y, z] \in \pp$.

  Then $[x, z] \in \pp$.
\end{corollary}

\begin{proof}
  If $y \in [x, z]$, then $[x, z] = [x, y] + (y, z]$,
  and $(y, z] \in \pp$ by~\cref{additive-endpoints}.

  Otherwise, either $x \in [y, z]$ or $z \in [x, y]$.
  WLOG, suppose $z \in [x, y]$.

  Then $[x, y] = [x, z] + (z, y]$,
  so $[x, z] \in \pp$ by the fact that $\pp$ is additive.
\end{proof}

% Definition of $\bounded{\pp}$
\begin{definitions}\label{bounded-definitions}
  Let $\pp$ be a property of linear orders.

  We define the following properties of linear orders:
  \begin{itemize}
    \item $\bounded{\pp}$ is the class of linear orders $M$ such that for every $x, y \in M$,
          the bounded subinterval $[x, y]$ is in $\pp$.
    \item $\lb{\pp}$ is the class of linear orders $M$ such that for every $x \in M$,
          the left-bounded ray $[x, \infty)$ is in $\pp$.
    \item $\rb{\pp}$ is the class of linear orders $M$ such that for every $x \in M$,
          the right-bounded ray $(-\infty, x]$ is in $\pp$.
  \end{itemize}
\end{definitions}

% Definition of a star property
\begin{definition}
  A property $\pp$ of linear orders is a \emph{star property} if
  for every linear orders $M$, and every family $\mathcal{F} \subseteq \pp$
  of subintervals of $M$ such that $J_1 \cap J_2 \ne \emptyset$
  for every $J_1, J_2 \in \mathcal{F}$, we have that
  $\bigcup \mathcal{F} \in \pp$.
\end{definition}

% Partition according to a star property
\begin{lemma}
  Let $\pp$ be a star property.

  Then for every linear order $M$,
  and every point $x \in M$, there exists a largest subinterval $J \subseteq M$ such that
  $J \in \pp$.

  Equivalently, we can define a convex equivalence relation $\sim_{\pp}$ on $M$ such that $x \sim_{\pp} y$ iff $[x, y] \in \pp$.

  That is,
  $x \sim_{\pp} y$ iff $x$ and $y$ are in the same largest $\pp$-subinterval.

\end{lemma}

\begin{proof}
  Let $J \subseteq M$ be the union of all $\bounded{\pp}$-subintervals containing $x$.
  All such subintervals intersect at $x$.

  Therefore, by the star lemma, $J$ is in $\bounded{\pp}$, and by definition
  $J$ is the largest $\pp$-subinterval containing $x$.

  Thus we can define the equivalence relation $\sim_{\pp}$ as above.
\end{proof}

% Lemma: $\bounded{\pp}$ is a star property
\begin{lemma}[Star Lemma]\label{star-lemma}
  Let $\pp$ be an additive property of linear orders.

  Then the property $\bounded{\pp}$ is a star property.
\end{lemma}

% Proof of the star lemma
\begin{proof}
  Let $M$ be a linear order,
  and let $\mathcal{F} \subseteq \bounded{\pp}$ be a family of subintervals of $M$.

  Let $[x, y] \subseteq \bigcup \mathcal{F}$ be any bounded subinterval. We need to prove
  it is in $\pp$.

  Suppose $x \in J_1$ and $y \in J_2$ for $J_1, J_2 \in \mathcal{F}$.

  Since $J_1 \cap J_2 \ne \emptyset$, we can take $z \in J_1 \cap J_2$.

  Then $[x, z] \subseteq J_1$ and $[z, y] \subseteq J_2$,
  and thus by the definition of $\bounded{\pp}$, $[x, z], [z, y] \in \pp$.
  Since $\pp$ is additive, by~\cref{additive-transitivity}, we have $[x, y] \in \pp$.
\end{proof}

\begin{lemma}\label{bounded-properties}
  Let $\pp$ be an additive property of linear orders.

  Then,
  \begin{enumerate}
    \item $\lb{\pp} = \set{M : M + 1 \in \bounded{\pp}}$
    \item $\rb{\pp} = \set{M : 1 + M \in \bounded{\pp}}$
    \item $\pp = \lb{\pp} \cap \rb{\pp} = \set{M : 1 + M + 1 \in \bounded{\pp}}$
  \end{enumerate}
\end{lemma}

\begin{proof}
  Let $M$ be a linear order.

  \begin{enumerate}
    % M + 1 case
    \item
          Suppose $M + \set{\infty} \in \bounded{\pp}$.
          Then for every $x \in M$, we have $[x, \infty] \in \pp$,
          and thus $[x, \infty) \in \pp$.
          Therefore, $M \in \lb{\pp}$.

          Conversely, if $M \in \lb{\pp}$,
          let $x, y \in M$ be any two points in $M + 1$.

          If $y < \infty$, then $[x, y] \subseteq [x, \infty)$.
          Since $[x, \infty) \in \pp$, we conclude that $[x, y] \in \pp$.
          Otherwise, if $y = \infty$, then $[x, y] = [x, \infty] = [x, \infty) + \set{\infty}$, and thus $[x, y] \in \pp$.

          % 1 + M case
    \item
          The second case is dual to the first case.

          % 1 + M + 1 case
    \item
          We will show a triple inclusion.

          If $M \in \pp$, then by additivity,
          $1 + M \in \pp$ and $M + 1 \in \pp$,
          and thus $M \in \lb{\pp} \cap \rb{\pp}$.

          If $M \in \lb{\pp} \cap \rb{\pp}$, then by~\cref{star-lemma},
          $1 + M + 1 \in \bounded{\pp}$.

          If $1 + M + 1 \in \bounded{\pp}$, then $M$ is a bounded
          subinterval of $1 + M + 1$, so $M \in \bounded{\pp}$.
  \end{enumerate}
\end{proof}

\begin{lemma}\label{bounded-decomposition}
  Let $\pp$ be an additive property of linear orders.

  Then,
  \begin{align*}
    \bounded{\pp} & = \pp                                                            \\
                  & \uplus \ps{\lb{\pp} \setminus \rb{\pp}}                          \\
                  & \uplus \ps{\rb{\pp} \setminus \lb{\pp}}                          \\
                  & \uplus \ps{ \bounded{\pp} \setminus \ps{\lb{\pp} \cup \rb{\pp}}}
  \end{align*}
\end{lemma}

\begin{proof}
  By~\cref{bounded-properties}, we conclude that
  $\lb{\pp}, \rb{\pp} \subseteq \bounded{\pp}$,
  since $M + 1 \in \pp$ and $1 + M \in \pp$ both imply $1 + M + 1 \in \pp$.

  Thus,
  \begin{align*}
    \bounded{\pp} & = \ps{\lb{\pp} \cap \rb{\pp}}                                    \\
                  & \uplus \ps{\lb{\pp} \setminus \rb{\pp}}                          \\
                  & \uplus \ps{\rb{\pp} \setminus \lb{\pp}}                          \\
                  & \uplus \ps{ \bounded{\pp} \setminus \ps{\lb{\pp} \cup \rb{\pp}}}
  \end{align*}

  Since by~\cref{bounded-properties} $\pp = \lb{\pp} \cap \rb{\pp}$,
  we conclude what we wanted to prove.
\end{proof}

\begin{lemma}
  Let $\pp$ be an additive property of linear orders.

  Let $M, M_1, M_2$ be linear orders such that
  $M = M_1 + M_2$.

  Then,
  \begin{enumerate}
    \item
    $M \in \bounded{\pp} \iff M_1 \in \lb{\pp} \wedge M_2 \in \rb{\pp}$
    \item $M \in \lb{\pp} \iff M_1 \in \lb{\pp} \wedge M_2 \in \pp$
    \item $M \in \rb{\pp} \iff M_1 \in \pp \wedge M_2 \in \rb{\pp}$
  \end{enumerate}
\end{lemma}

\begin{proof}
  From~\cref{bounded-properties}, we know that
  \begin{enumerate}
    \item 
  \begin{align*}
    M \in \bounded{\pp}
     & \iff M_1 + M_2 \in \bounded{\pp}                                \\
     & \iff M_1 + 1 \in \bounded{\pp} \wedge 1 + M_2 \in \bounded{\pp} \\
     & \iff M_1 \in \lb{\pp} \wedge M_2 \in \rb{\pp}
  \end{align*}
  where the second transition follows from the star lemma~\cref{star-lemma}.
  \item TBC.
  \item TBC.
  \end{enumerate}

\end{proof}

\begin{corollary}\label{bounded-is-right-plus-left}
  Let $\pp$ be an additive property of linear orders.

  Then,

  \[
    \bounded{\pp} \setminus \ps{\lb{\pp} \cup \rb{\pp}}
    = \ps{\lb{\pp} \setminus \rb{\pp}} + \ps{\rb{\pp} \setminus \lb{\pp}}
  \]
\end{corollary}

\begin{lemma}[Associativity of sum]
  Let $\pp_1$, $\pp_2$ and $\pp_3$ be properties.

  Then $\sum_{\pp_1}{\sum_{\pp_2}{\pp_3}} = \sum_{\sum_{\pp_1}{\pp_2}}{\pp_3}$.
\end{lemma}

\begin{proof}
  It follows directly from the associativity of the sum operation on
  linear orders. Actually, it generalizes to any algebraic equation
  which holds on linear orders.
\end{proof}

\begin{lemma}[Sum and union commute]
  Let $\ppp$ be a family of properties.

  Let $\qq$ be a property.

  Then $\sum_{\bigcup \ppp}{\qq} = \bigcup_{\pp \in \ppp}{\sum_{\pp}{\qq}}$.
\end{lemma}

\begin{proof}
  This is obvious from the definition of the sum operation.
\end{proof}

\begin{definition}
  We define $\cnt$ as the class of all countable linear orders.
\end{definition}


\begin{definition}
  Let $\gamma \ge \omega$ be a limit ordinal.

  We define $\Gamma_{\gamma} := \set{\beta : \beta \subseteq \gamma^\ast + \gamma}^+$.

  We define $\qqo := \Gamma_{\omega}$.
\end{definition}

\begin{example}
  \[
    \qqo = \set{1, \omega, \agemo}^+
  \]
\end{example}

\begin{observation}
  Let $\gamma \ge \omega$ be a limit ordinal.

  Then $\Gamma_{\gamma}$ is a monotone, additive property of linear orders.
\end{observation}
